<!DOCTYPE HTML>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>Canvas API</title>
	<script type="text/javascript">
	//失敗バージョン！！
	function test(){
		var canvas = document.getElementById('sample');
		if (canvas.getContext){
			var context = canvas.getContext("2d");
			var startX=0;
			var startY=0;
			
			canvas.addEventListener("mousemove", function(event){
				var rect=event.target.getBoundingClientRect();
				var x=event.clientX - rect.left;
				var y=event.clientY - rect.top;
				
				context.beginPath();
				context.lineWidth=5;
				context.strokeStyle="#000000";
				context.moveTo(startX,startY);
				context.lineTo(x,y);
				context.lineCap="round";
				context.stroke();
				startX=x;
				startY=y;
			},false);
			
			canvas.addEventListener("mousedown", function(event){
				var rect=event.target.getBoundingClientRect();
				startX=event.clientX - rect.left;
				startY=event.clientY - rect.top;
			},false);
		}
	}
	</script>
</head>
<body onLoad="test()">
	<h2>This is a test canvas.</h2>
	<canvas id="sample" style="border: 5px solid #000;" width="600" height="200">
	図形を表示するには、canvasタグをサポートしたブラウザが必要です。
	</canvas>
</body>
</html>